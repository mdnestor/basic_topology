import basic_topology.Operations
import basic_topology.Continuity

variable {X Y: Type*}

-- todo: we should define dense if closure = univ..

def dense (ğ’¯: Family X) (A: Set X): Prop :=
  âˆ€ U âˆˆ ğ’¯, Set.Nonempty U â†’ Set.Nonempty (A âˆ© U)

theorem dense_univ (ğ’¯: Family X): dense ğ’¯ Set.univ := by
  simp [dense]

theorem dense_iff_dense_in_base (ğ’¯ â„¬: Family X) (h: base ğ’¯ â„¬) (A: Set X): dense ğ’¯ A â†” âˆ€ U âˆˆ â„¬, Set.Nonempty U â†’ Set.Nonempty (A âˆ© U) := by
  sorry

-- some theorems ? Q is dense, I is dense, is C is countable then Cá¶œ is dense

theorem discrete_dense_iff (A: Set X): dense Set.univ A â†” A = Set.univ := by
  constructor
  Â· intro h
    apply Set.eq_univ_of_univ_subset
    intro x _
    simp [dense] at h
    exact Set.inter_singleton_nonempty.mp (h {x} (by exists x))
  Â· intro h
    rw [h]
    apply dense_univ

theorem indiscrete_dense (A: Set X): Set.Nonempty A â†’ dense {âˆ…, Set.univ} A := by
  intro h
  simp [dense]
  intro--
  exact h

-- theorem: dense in euclidean topology iff. dense in sorgenfry
theorem dense_iff (ğ’¯: Family X) (A: Set X): dense ğ’¯ A â†” closure ğ’¯ A = Set.univ := by
  constructor
  Â· intro h
    apply Set.eq_univ_of_univ_subset
    intro x _
    simp_all [closure, adherent, dense]
    intro N hN
    simp_all [Nbhd]
    obtain âŸ¨U, hU1, hU2, hU3âŸ© := hN
    have := h U hU1 (by exists x)
    rw [Set.inter_comm]
    exact Set.Nonempty.mono (Set.inter_subset_inter (fun â¦ƒaâ¦„ a â†¦ a) hU3) this
  Â· intro h
    simp [dense]
    intro U hU1 hU2
    simp_all [closure, adherent]
    obtain âŸ¨x, hxâŸ© := hU2
    have: x âˆˆ Set.univ := by exact trivial
    rw [â†h] at this
    simp at this
    have: âˆ€ N âˆˆ Nbhd ğ’¯ x, (N âˆ© A).Nonempty := this
    have: U âˆˆ Nbhd ğ’¯ x := by
      simp [Nbhd]
      exact open_neighborhood hx hU1
    rw [Set.inter_comm]
    (expose_names; exact this_1 U this)

theorem dense_antimono {ğ’¯â‚ ğ’¯â‚‚: Family X} (h1: ğ’¯â‚ âŠ† ğ’¯â‚‚) {A: Set X} (h2: dense ğ’¯â‚‚ A): dense ğ’¯â‚ A := by
  intro U hU1
  exact h2 U (h1 hU1)

-- example: Z is dense in the topology generated by [a,infty)
